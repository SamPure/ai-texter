const express=require("express"),cors=require("cors"),fs=require("fs"),path=require("path"),app=express(),CONVERSATIONS_FILE=path.join(__dirname,"conversations.json");app.use(cors()),app.use(express.json()),fs.existsSync(CONVERSATIONS_FILE)||fs.writeFileSync(CONVERSATIONS_FILE,"[]"),app.post("/training",(e,s)=>{try{console.log("Received:",e.body);const i=JSON.parse(fs.readFileSync(CONVERSATIONS_FILE));i.push({...e.body,timestamp:(new Date).toISOString()}),fs.writeFileSync(CONVERSATIONS_FILE,JSON.stringify(i,null,2)),console.log("Saved conversation successfully"),s.json({success:!0})}catch(i){console.error("Error:",i),s.status(500).json({success:!1,error:i.message})}}),app.get("/",(e,s)=>s.json({status:"ok"})),app.listen(3000,()=>{console.log("Server running on port 3000"),console.log("Saving conversations to:",CONVERSATIONS_FILE)});
