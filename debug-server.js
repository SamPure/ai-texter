const express=require("express");const cors=require("cors");const fs=require("fs");const app=express();app.use(cors());app.use(express.json());const FILE="test.json";app.post("/training",(req,res)=>{console.log("1. Received request");try{console.log("2. Request body:",JSON.stringify(req.body));const data={conversation:req.body.conversation,timestamp:new Date().toISOString()};console.log("3. Formatted data:",JSON.stringify(data));fs.writeFileSync(FILE,JSON.stringify([data],null,2));console.log("4. Wrote to file");const verify=fs.readFileSync(FILE,"utf8");console.log("5. Verified file contents:",verify);res.json({success:true})}catch(e){console.error("Error:",e);res.status(500).json({error:e.message})}});app.listen(3000,()=>console.log("Debug server running on port 3000"));
