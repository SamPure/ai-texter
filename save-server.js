const express=require("express");const cors=require("cors");const fs=require("fs");const path=require("path");const app=express();app.use(cors());app.use(express.json());const SAVE_FILE="saved_conversations.json";if(!fs.existsSync(SAVE_FILE)){fs.writeFileSync(SAVE_FILE,"[]")};app.post("/training",(req,res)=>{try{const conversations=JSON.parse(fs.readFileSync(SAVE_FILE));conversations.push({conversation:req.body.conversation,timestamp:new Date().toISOString()});fs.writeFileSync(SAVE_FILE,JSON.stringify(conversations,null,2));console.log(`Saved conversation at ${new Date().toISOString()}`);res.json({success:true})}catch(e){console.error(e);res.status(500).json({error:e.message})}});app.get("/",(req,res)=>res.json({status:"ok"}));app.listen(3001,()=>console.log("Server running on 3001, saving to",SAVE_FILE));
